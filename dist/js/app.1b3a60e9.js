(function(e){function t(t){for(var n,l,i=t[0],s=t[1],c=t[2],p=0,d=[];p<i.length;p++)l=i[p],o[l]&&d.push(o[l][0]),o[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,i=1;i<r.length;i++){var s=r[i];0!==o[s]&&(n=!1)}n&&(a.splice(t--,1),e=l(l.s=r[0]))}return e}var n={},o={app:0},a=[];function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=n,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/json-measuring-tape/dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=s;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-root"},[r("h1",[e._v("📏 Welcome to JSON Measuring Tape.")]),r("div",[e._v("\n    Paste your JSON into the box below.\n    I'll provide a navigable tree where you can explore each property and sub-property by size.\n  ")]),r("div",[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.json,expression:"json"}],staticClass:"json-textarea",domProps:{value:e.json},on:{input:function(t){t.target.composing||(e.json=t.target.value)}}})]),r("button",{staticClass:"button-calculate",on:{click:function(t){e.calculate()}}},[e._v("Calculate")]),e.jsonError?r("div",{staticClass:"error"},[r("div",[e._v("JSON validation failed. Error:")]),r("div",{domProps:{textContent:e._s(e.jsonError)}})]):e._e(),e.calculated?[r("h3",[e._v("Calculated tree:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.showAllRows,expression:"showAllRows"}],attrs:{id:"show-all-rows",type:"checkbox"},domProps:{checked:Array.isArray(e.showAllRows)?e._i(e.showAllRows,null)>-1:e.showAllRows},on:{change:function(t){var r=e.showAllRows,n=t.target,o=!!n.checked;if(Array.isArray(r)){var a=null,l=e._i(r,a);n.checked?l<0&&(e.showAllRows=r.concat([a])):l>-1&&(e.showAllRows=r.slice(0,l).concat(r.slice(l+1)))}else e.showAllRows=o}}}),r("label",{attrs:{for:"show-all-rows"}},[e._v("Expand all")]),e.calculated?r("div",{staticClass:"tree"},[r("json-row",{attrs:{input:e.calculated,"show-all":e.showAllRows,depth:0}})],1):e._e()]:e._e()],2)},a=[],l=(r("c5f6"),r("6762"),r("2fdb"),r("53ca")),i=(r("6b54"),r("ac6a"),r("456d"),r("d4ec")),s=r("bee2"),c="simple",u="object",p="array",d=function(){function e(t){Object(i["a"])(this,e),this.parsed=JSON.parse(t),this.calculated={},this.fullSize=null}return Object(s["a"])(e,[{key:"calculate",value:function(){var e=this.size(this.parsed);this.fullSize=e;var t=this.type(this.parsed);return t===c?h("[[root]]","simple",e,100):t===p?h("[[root]]","array",e,100,this.calculateArray(this.parsed)):t===u?h("[[root]]","object",e,100,this.calculateObject(this.parsed)):void 0}},{key:"calculateArray",value:function(e){var t=this;return e.map(function(e,r){return t.calculateItem(e,r)})}},{key:"calculateObject",value:function(e){var t=this;return Object.keys(e).map(function(r){return t.calculateItem(e[r],r)})}},{key:"calculateItem",value:function(e,t){var r=this.size(e),n=this.type(e),o=null;return n===u?o=this.calculateObject(e):n===p&&(o=this.calculateArray(e)),h(t.toString(),n,r,this.percent(r),o)}},{key:"type",value:function(e){var t=Object(l["a"])(e);if(null===e||["number","boolean","undefined","string","function"].includes(t))return c;if(Array.isArray(e))return p;if("object"===t)return u;throw new Error('Item of type "'.concat(t,'" could not be categorized. Item: ').concat(e))}},{key:"size",value:function(e){return new Blob([JSON.stringify(e)]).size}},{key:"percent",value:function(e){var t=e/this.fullSize*100;return Number(t.toFixed(2))}}]),e}();function h(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{name:e,type:t,size:r,percent:n,children:o}}var f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"json-row-root"},[r("div",{staticClass:"current-row",style:e.currentRowStyle},[e.input.children?r("button",{staticClass:"button-expand",style:{cursor:e.showAll?"default":"pointer"},on:{click:function(t){e.toggleChildren()}}},[e._v("\n      "+e._s(e.expandButtonIndicator)+"\n    ")]):e._e(),r("span",{staticClass:"row-info"},[e._v("\n      "+e._s(e.input.name)+": "+e._s(e.displaySize)+" ("+e._s(e.input.percent)+"%)\n    ")])]),e.input.children?r("div",{directives:[{name:"show",rawName:"v-show",value:e.showChildren||e.showAll,expression:"showChildren || showAll"}],staticClass:"next-row"},e._l(e.input.children,function(t){return r("json-row",{key:t.name,attrs:{input:t,"show-all":e.showAll,depth:e.depth+1}})}),1):e._e()])},v=[],w=["148, 0, 211","255, 0, 0","75, 0, 130","255, 127, 0","0, 0, 255","255, 255, 0","0, 255, 0"];function y(e){var t=w[e%w.length];return"rgba(".concat(t,", 0.1)")}var b={computed:{currentRowStyle:function(){return{backgroundColor:y(this.depth)}},displaySize:function(){var e=this.input.size;if(e<1e3)return"".concat(e,"B");if(e<1e6){var t=e/1e3;return"".concat(this.floatToDisplay(t),"KB")}if(e<1e9){var r=e/1e6;return"".concat(this.floatToDisplay(r),"MB")}if(e<1e12){var n=e/1e9;return"".concat(this.floatToDisplay(n),"GB")}var o=e/1e12;return"".concat(this.floatToDisplay(o),"TB")},expandButtonIndicator:function(){return this.showAll?">":this.showChildren?"-":"+"}},data:function(){return{showChildren:!1}},methods:{floatToDisplay:function(e){return Number(e.toFixed(2))},toggleChildren:function(){this.showAll||(this.showChildren=!this.showChildren)}},name:"json-row",props:{input:{type:Object,required:!0},showAll:{type:Boolean,required:!0},depth:{type:Number,required:!0}}},m=b,j=(r("b694"),r("2877")),_=Object(j["a"])(m,f,v,!1,null,"422ac760",null);_.options.__file="json-row.vue";var g=_.exports,A={components:{JsonRow:g},data:function(){return{calculated:null,json:"",jsonError:"",showAllRows:!1}},methods:{calculate:function(){this.jsonError="";var e=this.json;try{JSON.parse(e)}catch(t){throw this.jsonError=t.message,t}this.calculated=new d(e).calculate()}}},O=A,x=(r("931e"),Object(j["a"])(O,o,a,!1,null,"0c5dcfcb",null));x.options.__file="App.vue";var C=x.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(C)}}).$mount("#app")},"67f6":function(e,t,r){},"931e":function(e,t,r){"use strict";var n=r("67f6"),o=r.n(n);o.a},b694:function(e,t,r){"use strict";var n=r("e9cd"),o=r.n(n);o.a},e9cd:function(e,t,r){}});
//# sourceMappingURL=app.1b3a60e9.js.map